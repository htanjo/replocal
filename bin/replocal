#!/usr/bin/env node
'use strict';

var program = require('commander');
var replocal = require('../lib');
var pkg = require('../package.json');

function exec(program) {

  if (!program.args.length) {
    console.error('No <hostname> specified');
    program.help();
  }

  var options = {
    hostname: program.args[0],
    path: program.path,
    port: program.port
  };

  replocal(options);

};

program
  .usage('[options] <hostname>')
  .version(pkg.version)
  .option('--path <directory>', 'directory for mapping to document root (default: process.cwd())')
  .option('--port <number>', 'port number of proxy server (default: 8888)', parseInt);

program.on('--help', function () {
  console.log('  Examples:');
  console.log('');
  console.log('    $ replocal example.com');
  console.log('    $ replocal --port=9999 --path=path/to/docroot example.com');
  console.log('');
});

program.parse(process.argv);

exec(program);
